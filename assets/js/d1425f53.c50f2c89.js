"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[6941],{8992:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>p,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"Web Dev/12 MyBatisPlus","title":"12 MyBatisPlus","description":"\u57fa\u7840\u4f7f\u7528","source":"@site/docs/Web Dev/12 MyBatisPlus.md","sourceDirName":"Web Dev","slug":"/Web Dev/12 MyBatisPlus","permalink":"/docs/Web Dev/12 MyBatisPlus","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Web Dev/12 MyBatisPlus.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"11 MyBatis","permalink":"/docs/Web Dev/11 MyBatis"},"next":{"title":"13 Docker","permalink":"/docs/Web Dev/13 Docker"}}');var a=s(4848),d=s(8453);const i={},c=void 0,p={},l=[{value:"\u57fa\u7840\u4f7f\u7528",id:"\u57fa\u7840\u4f7f\u7528",level:3},{value:"\u5e38\u89c1\u6ce8\u89e3",id:"\u5e38\u89c1\u6ce8\u89e3",level:3},{value:"\u81ea\u5b9a\u4e49\u914d\u7f6e",id:"\u81ea\u5b9a\u4e49\u914d\u7f6e",level:3},{value:"\u6761\u4ef6\u6784\u9020\u5668",id:"\u6761\u4ef6\u6784\u9020\u5668",level:3},{value:"\u81ea\u5b9a\u4e49SQL",id:"\u81ea\u5b9a\u4e49sql",level:3},{value:"IService \u63a5\u53e3",id:"iservice-\u63a5\u53e3",level:3}];function t(e){const r={code:"code",h3:"h3",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.h3,{id:"\u57fa\u7840\u4f7f\u7528",children:"\u57fa\u7840\u4f7f\u7528"}),"\n",(0,a.jsx)(r.p,{children:"\u4f7f\u7528MyBatisPlus\u53ea\u9700\u8981\u4ee5\u4e0b\u51e0\u6b65\u3002"}),"\n",(0,a.jsx)(r.p,{children:"\u9996\u5148\u5f15\u5165\u4f9d\u8d56"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-XML",children:"<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-boot-starter</artifactId>\n    <version>3.5.3.1</version>\n</dependency>\n"})}),"\n",(0,a.jsxs)(r.p,{children:["\u7136\u540e\u8ba9 ",(0,a.jsx)(r.code,{children:"Mapper"})," \u63a5\u53e3\u7ee7\u627f ",(0,a.jsx)(r.code,{children:"BaseMapper"})," \u7c7b"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-Java",children:"public interface UserMapper extends BaseMapper<User> {}\n"})}),"\n",(0,a.jsx)(r.p,{children:"\u5373\u53ef\u4f7f\u7528\u5bf9\u5e94\u7684\u51fd\u6570\u3002"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-Java",children:"userMapper.insert(user);\nUser user = userMapper.selectById(5L);\nList<User> users = userMapper.selectBatchIds(List.of(1L, 2L, 3L, 4L));\nuserMapper.updateById(user);\nuserMapper.deleteById(5L);\n"})}),"\n",(0,a.jsx)(r.p,{children:"MyBatisPlus\u53ef\u4ee5\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684SQL\u8bed\u53e5\uff0c\u4e14MyBatisPlus\u662f\u201c\u65e0\u4fb5\u5165\u201d\u7684\uff0c\u8fdb\u884c\u8fd9\u4e9b\u4fee\u6539\u4e0d\u4f1a\u5f71\u54cd\u4e4b\u524d\u9879\u76ee\u4e2dMyBatis\u7684\u5185\u5bb9\u3002"}),"\n",(0,a.jsx)(r.h3,{id:"\u5e38\u89c1\u6ce8\u89e3",children:"\u5e38\u89c1\u6ce8\u89e3"}),"\n",(0,a.jsxs)(r.p,{children:["MyBatisPlus\u901a\u8fc7\u626b\u63cf\u5f97\u5230\u7684\u5b9e\u4f53\u7c7b\u5224\u65ad\u6570\u636e\u5e93\u4fe1\u606f\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbf\u95ee\u79c1\u6709\u5b57\u6bb5\u3002\u5bf9\u4e8e\u5b9e\u4f53\u7c7b\uff0cMyBatisPlus\u7ea6\u5b9a\u7c7b\u540d\u9a7c\u5cf0\u8f6c\u4e0b\u5212\u7ebf\uff08UserInfo -> user_info\uff09\u4e3a\u8868\u540d\uff0cid\u5b57\u6bb5\u4e3a\u4e3b\u952e\uff0c\u53d8\u91cf\u540d\u9a7c\u5cf0\u8f6c\u4e0b\u5212\u7ebf\u4e3a\u8868\u7684\u5b57\u6bb5\u540d\u3002\u5982\u679c\u53d8\u91cf\u4e3a\u5e03\u5c14\u7c7b\u578b\uff0c\u4e14\u540d\u4e3a ",(0,a.jsx)(r.code,{children:"isXxx"})," \uff0c\u4f1a\u628a ",(0,a.jsx)(r.code,{children:"Xxx"})," \uff08\u53bb\u6389is\uff09\u4f5c\u4e3a\u5b57\u6bb5\u540d\u3002"]}),"\n",(0,a.jsxs)(r.p,{children:["\u5982\u679c\u5b9e\u4f53\u7c7b\u4e0d\u7b26\u5408\u7ea6\u5b9a\uff0c\u53ef\u4ee5\u901a\u8fc7\u6ce8\u89e3\u624b\u52a8\u5b9a\u4e49\u8868\u540d\u3001\u4e3b\u952e\u548c\u5b57\u6bb5\u540d\uff0c\u4e09\u4e2a\u6ce8\u89e3\u5206\u522b\u4e3a ",(0,a.jsx)(r.code,{children:"@TableName"})," \u3001 ",(0,a.jsx)(r.code,{children:"@TableId"})," \u548c ",(0,a.jsx)(r.code,{children:"@TableField"})," \u3002\u6ce8\u610f\u7c7b\u4e2d\u5fc5\u987b\u6709\u4e3b\u952e\u6216\u540d\u4e3a ",(0,a.jsx)(r.code,{children:"id"})," \u7684\u5b57\u6bb5\u3002"]}),"\n",(0,a.jsxs)(r.p,{children:["\u5bf9\u4e8e\u4e3b\u5b57\u6bb5\uff0c\u53ef\u4ee5\u6307\u5b9a ",(0,a.jsx)(r.code,{children:"type"})," \u4e3a ",(0,a.jsx)(r.code,{children:"IdType.Auto"})," \u3001 ",(0,a.jsx)(r.code,{children:"IdType.Input"})," \u6216 ",(0,a.jsx)(r.code,{children:"IdType.ASSIGN_ID"})," \uff0c\u5206\u522b\u4ee3\u8868\u81ea\u589e\u3001\u7528\u6237\u6307\u5b9a\uff08\u9700\u8981\u624b\u52a8\u8bbe\u7f6e\uff09\u548c20\u4f4d\u6ce2\u6d6a\u5f62\u968f\u673a\u6570\uff0c\u9ed8\u8ba4\u4e3a\u6700\u540e\u4e00\u79cd\u3002"]}),"\n",(0,a.jsx)(r.p,{children:"\u5bf9\u4e8e\u8868\u4e2d\u6709\u5173\u952e\u5b57\u7684\u60c5\u51b5\uff0c\u6216\u67d0\u4e9b\u53d8\u91cf\u4e0d\u5728\u8868\u4e2d\uff0c\u90fd\u9700\u8981\u624b\u52a8\u8bbe\u7f6e\u3002"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-Java",children:'@TableName("tb_user")\npublic class User {\n    @TableId(value = "id", type = IdType.Auto)\n    private Long id;\n    @TableField("username")\n    private String name;\n    @TableField("isMarried")\n    private Boolean isMarried;\n    @TableField("`order`")\n    private Integer order;\n    @TableField(exist = false)\n    private String address;\n}\n'})}),"\n",(0,a.jsx)(r.h3,{id:"\u81ea\u5b9a\u4e49\u914d\u7f6e",children:"\u81ea\u5b9a\u4e49\u914d\u7f6e"}),"\n",(0,a.jsx)(r.p,{children:"MyBatisPlus\u7684\u81ea\u5b9a\u4e49\u914d\u7f6e\u5199\u5728Application.yaml\u4e2d\u3002\u5927\u90e8\u5206\u4e0d\u9700\u8981\u81ea\u5b9a\u4e49\u914d\u7f6e\u3002"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-YAML",children:"mybatis-plus:\n  type-aliases-package: com.itheima.mp.domain.po\n  global-config:\n    db-config:\n      id-type: auto\n"})}),"\n",(0,a.jsx)(r.h3,{id:"\u6761\u4ef6\u6784\u9020\u5668",children:"\u6761\u4ef6\u6784\u9020\u5668"}),"\n",(0,a.jsx)(r.p,{children:"MyBatisPlus\u53ea\u63d0\u4f9b\u4e86\u6839\u636e\u4e3b\u952e\u67e5\u8be2\u7684\u51fd\u6570\u3002\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5176\u5b83\u51fd\u6570\u3002"}),"\n",(0,a.jsxs)(r.p,{children:["\u67e5\u8be2\u65f6\u9700\u8981\u7528 ",(0,a.jsx)(r.code,{children:"QueryWrapper<T>"})," \u7c7b\u6784\u5efa\u67e5\u8be2\u6761\u4ef6\u3002"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-Java",children:'void testQueryWrapper() {\n    QueryWrapper<User> wrapper = new QueryWrapper<>();\n    wrapper.select("id", "username", "info")\n            .like("username", "o")\n            .ge("balance", 1000);\n    List<User> users = userMapper.selectList(wrapper);\n    users.forEach(System.out::println);\n}\n\nvoid testUpdateWrapper() {\n    User user = new User();\n    user.setBalance(2000);\n    QueryWrapper<User> wrapper = new QueryWrapper<User>()\n            .eq("username", "jack");\n    userMapper.update(user, wrapper);\n}\n'})}),"\n",(0,a.jsx)(r.p,{children:"\u6ce8\u610f\u5b57\u7b26\u4e32\u4e2d\u7684\u540d\u5b57\u4e3a\u8868\u540d\uff08\u8868\u5b57\u6bb5\uff09\uff0c\u5176\u5b83\u5730\u65b9\u4e3a\u7c7b\u540d\u6216\u7c7b\u53d8\u91cf\u3002"}),"\n",(0,a.jsxs)(r.p,{children:["\u901a\u8fc7\u4f7f\u7528 ",(0,a.jsx)(r.code,{children:"LambdaQueryWrapper<T>"})," \u53ef\u4ee5\u51cf\u5c11\u5b57\u7b26\u4e32\u786c\u7f16\u7801\u3002"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-Java",children:'void testLambdaQueryWrapper() {\n    LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();\n    wrapper.select(User::getI, User::getName, User::getInfo)\n            .like(User::getName, "o")\n            .ge(User::getBalance, 1000);\n    List<User> users = userMapper.selectList(wrapper);\n    users.forEach(System.out::println);\n}\n'})}),"\n",(0,a.jsxs)(r.p,{children:["\u5bf9\u4e8e\u6bd4\u8f83\u7279\u6b8a\u7684set\u8bed\u53e5\uff0c\u8981\u4f7f\u7528 ",(0,a.jsx)(r.code,{children:"UpdateWrapper<T>"})," \u6216 ",(0,a.jsx)(r.code,{children:"LambdaUpdateWrapper<T>"})," \u3002\u8fd9\u4e2a\u7c7b\u5141\u8bb8\u4e0d\u521b\u5efa\u5b9e\u4f53\u5bf9\u8c61\u3002"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-Java",children:'void updateWrapper() {\n    List<Long> ids = List.of(1L, 2L, 4L);\n    UpdateWrapper<User> wrapper = new UpdateWrapper<User>()\n            .setSql("balance = balance - 20")\n            .in("id", ids);\n    userMapper.update(null, wrapper);\n}\n'})}),"\n",(0,a.jsx)(r.h3,{id:"\u81ea\u5b9a\u4e49sql",children:"\u81ea\u5b9a\u4e49SQL"}),"\n",(0,a.jsxs)(r.p,{children:["\u5f88\u591a\u89c4\u8303\u4e0d\u5141\u8bb8\u4e0a\u9762 ",(0,a.jsx)(r.code,{children:"updateWrapper"})," \u4e2d\u7684\u5199\u6cd5\uff0cSQL\u8bed\u53e5\u4e0d\u80fd\u51fa\u73b0\u5728\u4e1a\u52a1\u903b\u8f91\u5904\u7406\u4e2d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49SQL\u65b9\u6cd5\u3002"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-Java",children:'void updateBalanceByIds(@Param(Constants.WRAPPER) QueryWrapper<User> wrapper, @Param("amount") int amount);\n'})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-Java",children:'void testUpdateWrapper() {\n    User user = new User();\n    user.setBalance(2000);\n    QueryWrapper<User> wrapper = new QueryWrapper<User>()\n            .eq("username", "jack");\n    userMapper.update(user, wrapper);\n}\n'})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-XML",children:'<update id="updateBalanceByIds">\n    UPDATE user_tb SET balance = balance - #{amount} ${ew.customSqlSegment}\n</update>\n'})}),"\n",(0,a.jsx)(r.h3,{id:"iservice-\u63a5\u53e3",children:"IService \u63a5\u53e3"}),"\n",(0,a.jsxs)(r.p,{children:["\u4f7f\u7528IServce\u63a5\u53e3\u65f6\uff0c\u5c06\u81ea\u5b9a\u4e49\u63a5\u53e3\u7ee7\u627f ",(0,a.jsx)(r.code,{children:"IService<User>"})," \u63a5\u53e3\uff0c\u81ea\u5b9a\u4e49\u7c7b\u5b9e\u73b0\u81ea\u5b9a\u4e49\u63a5\u53e3\uff0c\u7ee7\u627f ",(0,a.jsx)(r.code,{children:"ServiceImpl<UserMapper, User>"})," \u7c7b\u3002"]})]})}function u(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>i,x:()=>c});var n=s(6540);const a={},d=n.createContext(a);function i(e){const r=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(d.Provider,{value:r},e.children)}}}]);